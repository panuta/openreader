{% extends 'base_authenticated.html' %}
{% load helper_tags %}

{% block head_title %}Edit Magazine - {{publication.title}}{% endblock %}

{% block body_authenticated %}
<div>
  <ul class="breadcrumb">
    <li><a href="{% url view_magazines publisher.id %}">Magazines</a> <span class="divider">/</span></li>
    <li><a href="{% url view_magazine publication.magazineissue.magazine.id %}">{{publication.magazineissue.magazine.title}}</a> <span class="divider">/</span></li>
    <li><a href="{% url view_publication publication.id %}">{{publication.title}}</a> <span class="divider">/</span></li>
    <li class="active">Edit magazine issue</li>
  </ul>

  <form method="POST" action="{% url edit_publication publication.id %}">
    {% csrf_token %}
    {{form.non_field_errors}}
    <fieldset>
      <legend>Magazine issue</legend>

      <div class="clearfix"><label for="id_title">Issue name:</label><div class="input">{{form.title}}{{form.title.errors}}</div></div>
      <div class="clearfix"><label for="id_description">Description:</label><div class="input">{{form.description}}<span class="help-block">Optional</span>{{form.description.errors}}</div></div>

      {% can user 'publish' publisher %}
      <div class="clearfix">
        <label id="id_publish_status">Publish status</label>
        <div class="input">
          <ul class="inputs-list publish_status">
            <li>
              <label><input type="radio" value="{{PUBLISH_STATUS_UNPUBLISHED}}" name="publish_status"{% if form.publish_status.value == PUBLISH_STATUS_UNPUBLISHED|slugify %} checked="checked"{% endif %}><span>Unpublished</span></label>
            </li>
            <li>
              <label><input type="radio" value="{{PUBLISH_STATUS_SCHEDULED}}" name="publish_status"{% if form.publish_status.value == PUBLISH_STATUS_SCHEDULED|slugify %} checked="checked"{% endif %}><span>Schedule to publish</span></label>
              <div class="schedule_date">วันที่ {{form.schedule_date}}</div>{{form.schedule_date.errors}}
              <div class="schedule_time">เวลา {{form.schedule_time}}</div>{{form.schedule_time.errors}}
            </li>
            <li>
              <label><input type="radio" value="{{PUBLISH_STATUS_PUBLISHED}}" name="publish_status"{% if form.publish_status.value == PUBLISH_STATUS_PUBLISHED|slugify %} checked="checked"{% endif %}><span>Published</span></label>
            </li>
          </ul>
        </div>
        {{form.publish_status.errors}}
      </div>
      {% endcan %}

      <div class="actions">
        <input type="submit" value="Edit magazine issue" class="btn primary">
        <input type="reset" value="Reset" class="btn">
      </div>
    </fieldset>
  </form>

</div>
{% endblock %}